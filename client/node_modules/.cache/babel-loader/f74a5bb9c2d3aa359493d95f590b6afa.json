{"ast":null,"code":"const Encoder = require('../../encoder');\n\nconst crc32 = require('../../crc32');\n\nconst {\n  Types: Compression,\n  COMPRESSION_CODEC_MASK\n} = require('../compression');\n/**\n * v1 (supported since 0.10.0)\n * Message => Crc MagicByte Attributes Key Value\n *   Crc => int32\n *   MagicByte => int8\n *   Attributes => int8\n *   Timestamp => int64\n *   Key => bytes\n *   Value => bytes\n */\n\n\nmodule.exports = ({\n  compression = Compression.None,\n  timestamp = Date.now(),\n  key,\n  value\n}) => {\n  const content = new Encoder().writeInt8(1) // magicByte\n  .writeInt8(compression & COMPRESSION_CODEC_MASK).writeInt64(timestamp).writeBytes(key).writeBytes(value);\n  const crc = crc32(content);\n  return new Encoder().writeInt32(crc).writeEncoder(content);\n};","map":{"version":3,"sources":["/Users/gagekrumbach/Documents/call-center-manage/node_modules/kafkajs/src/protocol/message/v1/index.js"],"names":["Encoder","require","crc32","Types","Compression","COMPRESSION_CODEC_MASK","module","exports","compression","None","timestamp","Date","now","key","value","content","writeInt8","writeInt64","writeBytes","crc","writeInt32","writeEncoder"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,eAAD,CAAvB;;AACA,MAAMC,KAAK,GAAGD,OAAO,CAAC,aAAD,CAArB;;AACA,MAAM;AAAEE,EAAAA,KAAK,EAAEC,WAAT;AAAsBC,EAAAA;AAAtB,IAAiDJ,OAAO,CAAC,gBAAD,CAA9D;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAK,MAAM,CAACC,OAAP,GAAiB,CAAC;AAAEC,EAAAA,WAAW,GAAGJ,WAAW,CAACK,IAA5B;AAAkCC,EAAAA,SAAS,GAAGC,IAAI,CAACC,GAAL,EAA9C;AAA0DC,EAAAA,GAA1D;AAA+DC,EAAAA;AAA/D,CAAD,KAA4E;AAC3F,QAAMC,OAAO,GAAG,IAAIf,OAAJ,GACbgB,SADa,CACH,CADG,EACA;AADA,GAEbA,SAFa,CAEHR,WAAW,GAAGH,sBAFX,EAGbY,UAHa,CAGFP,SAHE,EAIbQ,UAJa,CAIFL,GAJE,EAKbK,UALa,CAKFJ,KALE,CAAhB;AAOA,QAAMK,GAAG,GAAGjB,KAAK,CAACa,OAAD,CAAjB;AACA,SAAO,IAAIf,OAAJ,GAAcoB,UAAd,CAAyBD,GAAzB,EAA8BE,YAA9B,CAA2CN,OAA3C,CAAP;AACD,CAVD","sourcesContent":["const Encoder = require('../../encoder')\nconst crc32 = require('../../crc32')\nconst { Types: Compression, COMPRESSION_CODEC_MASK } = require('../compression')\n\n/**\n * v1 (supported since 0.10.0)\n * Message => Crc MagicByte Attributes Key Value\n *   Crc => int32\n *   MagicByte => int8\n *   Attributes => int8\n *   Timestamp => int64\n *   Key => bytes\n *   Value => bytes\n */\n\nmodule.exports = ({ compression = Compression.None, timestamp = Date.now(), key, value }) => {\n  const content = new Encoder()\n    .writeInt8(1) // magicByte\n    .writeInt8(compression & COMPRESSION_CODEC_MASK)\n    .writeInt64(timestamp)\n    .writeBytes(key)\n    .writeBytes(value)\n\n  const crc = crc32(content)\n  return new Encoder().writeInt32(crc).writeEncoder(content)\n}\n"]},"metadata":{},"sourceType":"script"}